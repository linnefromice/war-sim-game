---
description: テスト駆動開発ワークフローを強制。インターフェースをスキャフォールドし、最初にテストを生成し、次に合格するための最小限のコードを実装。80%以上のカバレッジを確保。
---

# TDDコマンド

このコマンドは**tdd-guide**エージェントを呼び出し、テスト駆動開発方法論を強制します。

## このコマンドの機能

1. **インターフェースをスキャフォールド** - 最初に型/インターフェースを定義
2. **最初にテストを生成** - 失敗するテストを書く（RED）
3. **最小限のコードを実装** - 合格するのに十分なコードのみ（GREEN）
4. **リファクタリング** - テストがグリーンのままコードを改善（REFACTOR）
5. **カバレッジを確認** - 80%以上のテストカバレッジを確保

## 使用タイミング

`/tdd`を使用する場合:
- 新機能を実装
- 新しい関数/コンポーネントを追加
- バグ修正（最初にバグを再現するテストを書く）
- 既存コードをリファクタリング
- クリティカルなビジネスロジックを構築

## TDDサイクル

```
RED → GREEN → REFACTOR → REPEAT

RED:      失敗するテストを書く
GREEN:    合格するための最小限のコードを書く
REFACTOR: コードを改善、テストは通ったまま
REPEAT:   次の機能/シナリオ
```

## TDDベストプラクティス

**すべきこと:**
- ✅ 実装の前にテストを最初に書く
- ✅ 実装前にテストを実行し失敗を確認
- ✅ テストを通すための最小限のコードを書く
- ✅ テストがグリーンになってからのみリファクタリング
- ✅ エッジケースとエラーシナリオを追加
- ✅ 80%以上のカバレッジを目指す（クリティカルコードは100%）

**すべきでないこと:**
- ❌ テストより前に実装を書く
- ❌ 各変更後のテスト実行をスキップ
- ❌ 一度に多くのコードを書く
- ❌ 失敗するテストを無視
- ❌ 実装詳細をテスト（動作をテスト）
- ❌ すべてをモック（統合テストを優先）

## 含めるべきテスト種別

**ユニットテスト**（関数レベル）:
- ハッピーパスシナリオ
- エッジケース（空、null、最大値）
- エラー条件
- 境界値

**統合テスト**（コンポーネントレベル）:
- APIエンドポイント
- データベース操作
- 外部サービス呼び出し
- フック付きReactコンポーネント

**E2Eテスト**（`/e2e`コマンドを使用）:
- クリティカルなユーザーフロー
- マルチステッププロセス
- フルスタック統合

## カバレッジ要件

- **最低80%** すべてのコード
- **100%必須** 以下について:
  - 金融計算
  - 認証ロジック
  - セキュリティクリティカルなコード
  - コアビジネスロジック

## 重要な注意

**必須**: テストは実装の前に書かなければならない。TDDサイクルは:

1. **RED** - 失敗するテストを書く
2. **GREEN** - 合格するように実装
3. **REFACTOR** - コードを改善

REDフェーズをスキップしない。テストより前にコードを書かない。

## 他のコマンドとの統合

- `/plan`を最初に使用して何を構築するか理解
- `/tdd`を使用してテスト付きで実装
- ビルドエラーが発生したら`/build-and-fix`を使用
- 実装をレビューするために`/code-review`を使用
- カバレッジを確認するために`/test-coverage`を使用

## 関連エージェント

このコマンドは`tdd-guide`エージェントを呼び出します:
`~/.claude/agents/tdd-guide.md`

参照できるスキル:
`~/.claude/skills/tdd-workflow/`
